---
// src/layouts/BaseLayout.astro
import '../styles/tailwind.css';
import { ClientRouter } from 'astro:transitions';
const { title = 'TCIG/CIPS', noTopPad = false } = Astro.props;
---

<html lang="en" data-astro-transition>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <!-- SPA routing + view transitions -->
    <ClientRouter/>  <!-- rely on named transitions only -->
    <style>
      /* Critical clamp to prevent title flash (2 lines) */
      .vt-clamp-2 {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
        line-height: 1.25;
        max-height: 2.5em; /* 2 × line-height */
      }
    </style>
  </head>
  <body class="min-h-screen bg-white text-gray-900">
    <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b" transition:persist>
      <nav class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
        <a href="/" class="flex items-center gap-3">
          <img src="/cips_logo.svg" alt="" class="h-12 w-12" transition:name="logo" />
          <span class="font-semibold" transition:name="brand">TCIG/CIPS</span>
        </a>
        <ul class="flex gap-6 text-sm">
          <li><a class="hover:underline" href="/">Home</a></li>
          <li><a class="hover:underline" href="/publications/">Research Areas</a></li>
          <li><a class="hover:underline" href="/publications/">Publications</a></li>
          <li><a class="hover:underline" href="/people/">People</a></li>
          <li><a class="hover:underline" href="https://www.compimaging.dgp.toronto.edu/home/">TCIG</a></li>
          
        </ul>
      </nav>
    </header>

    <main class={`mx-auto max-w-6xl px-4 ${noTopPad ? 'pt-0' : 'pt-10'} pb-10`} transition:name="content">
      <slot />
    </main>

    <footer class="border-t py-10 text-sm text-gray-500">
      <div class="mx-auto max-w-6xl px-4">
        © {new Date().getFullYear()} TCIG/CIPS. Design is inspired by the <a href="https://www.scenerepresentations.org/" class="underline hover:text-gray-700">MIT Scene Representation Group's web page</a>.
      </div>
    </footer>
  </body>
</html>
