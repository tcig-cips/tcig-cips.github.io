---
/**
 * Props:
 * - items: Array<{
 *     title: string;
 *     image: string;         // e.g. /images/foci/nsr.jpg
 *     href?: string;         // optional: make the whole tile a link
 *     kicker?: string;       // small label above title
 *     blurb?: string;        // short line under title
 *     slug?: string;         // optional: for shared-element transitions
 *   }>
 * - heading?: string
 * - ratio?: string           // tailwind aspect ratio; default 16:9
 */
const { items = [], heading = 'Research Focus', ratio = 'aspect-[16/9]' } = Astro.props;
if (!items.length) return;
---

<section class="mb-10">
  <div class="mb-3">
    <h2 class="text-xl font-semibold">{heading}</h2>
  </div>

  <!-- 2-column grid, left-aligned -->
  <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
    {items.map((it, i) => {
      const Tile = (
        <article
        class={`group relative overflow-hidden rounded-xl ring-1 ring-black/10 bg-black ${ratio}`}
        transition:name={`focus-${it.slug}`}
        >
          <!-- Background image -->
          <img
            src={it.image}
            alt=""
            class="absolute inset-0 h-full w-full object-cover"
            loading={i < 2 ? 'eager' : 'lazy'}
            decoding="async"
          />

          <!-- Overlay gradient + text -->
          <div class="absolute inset-0">
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent transition-opacity duration-200 group-hover:from-black/80"></div>
            <div class="relative h-full flex items-end">
              <div class="p-4 sm:p-5">
                {it.kicker && (
                  <div class="text-xs uppercase tracking-widest text-white/80 mb-1">{it.kicker}</div>
                )}
                <h3 class="text-white text-lg sm:text-xl font-semibold drop-shadow">
                  {it.title}
                </h3>
                {it.blurb && (
                  <p class="mt-1 text-white/90 text-sm line-clamp-2">{it.blurb}</p>
                )}
              </div>
            </div>
          </div>

          <!-- subtle hover lift -->
          <div class="pointer-events-none absolute inset-0 ring-0 transition group-hover:ring-2 group-hover:ring-white/30"></div>
        </article>
      );

      return it.href
        ? <a href={it.href} class="block">{Tile}</a>
        : Tile;
    })}
  </div>
</section>
